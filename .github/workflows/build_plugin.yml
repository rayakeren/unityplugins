name: Build Apple Plugin
on: [workflow_dispatch]

jobs:
  build:
    runs-on: macos-latest
    
    steps:
      - uses: actions/checkout@v3
      
      # NEW STEP: Delete the Vision Pro plugin so the build doesn't crash
      - name: Remove Spatial Controller
        run: |
          rm -rf plug-ins/Apple.SpatialController
          rm -rf plug-ins/Apple.PHASE
          rm -rf plug-ins/Apple.DataCollection
      
      - name: Run Build Script
        run: python3 build.py
        
      - name: Upload Artifacts
        uses: actions/upload-artifact@v4
        with:
          name: AppleUnityPlugins-Built
          path: Build/*.tgz
